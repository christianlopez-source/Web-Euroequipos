!function(d){"use strict";var h=h||{};h.init=function(){h.$body=d(document.body),h.$window=d(window),h.$header=d("#masthead"),this.scrollTop(),this.activeHeaderMenu(),this.searchToggle(),this.headerSticky(),this.menuBlock(),this.mobileMenu(),this.pageHeader(),this.widgetOffice(),this.singlePortfolioGallery(),this.portfolioFilter(),this.imagesPopUp(),this.productQuantity(),this.singleGallery()},h.scrollTop=function(){var e=d("#scroll-top");h.$window.scroll(function(){h.$window.scrollTop()>h.$window.height()?e.addClass("show-scroll"):e.removeClass("show-scroll")}),e.on("click",function(e){e.preventDefault(),d("html, body").stop().animate({scrollTop:0},800)})},h.menuBlock=function(){var e=d(".menu-block-right"),i=d(".menu-block-left"),t=d(".container").width(),a=(h.$window.width()-t)/2;h.$window.on("resize",function(){e.css({width:a,right:-1*a}),i.css({width:a,left:-1*a})}).trigger("resize")},h.searchToggle=function(){d("a.toggle-search").on("click",function(e){e.preventDefault(),d(this).parent().toggleClass("show-search")})},h.mobileMenu=function(){var i=d("#primary-mobile-nav");h.$header.on("click","#mf-navbar-toggle",function(e){e.preventDefault(),i.toggleClass("open"),h.$body.toggleClass("open-canvas-panel")}),i.find(".menu .menu-item-has-children > a").prepend('<span class="toggle-menu-children"></span>'),i.on("click",".menu-item-has-children > a, .menu-item-has-children > span",function(e){var i;e.preventDefault(),(i=d(this)).closest("li").siblings().find("ul").slideUp(),i.closest("li").siblings().removeClass("active"),i.closest("li").siblings().find("li").removeClass("active"),i.closest("li").children("ul").slideToggle(),i.closest("li").toggleClass("active")}),i.on("click",".close-canvas-mobile-panel",function(e){e.preventDefault(),h.$body.removeClass("open-canvas-panel"),d("#primary-mobile-nav").removeClass("open")}),d("#off-canvas-layer").on("click",function(e){e.preventDefault(),h.$body.removeClass("open-canvas-panel"),d("#primary-mobile-nav").removeClass("open")}),h.$window.on("resize",function(){1200<h.$window.width()&&i.hasClass("open")&&(i.removeClass("open"),h.$body.removeClass("open-canvas-panel"))})},h.headerSticky=function(){var e,i,t,a,n,o,s;h.$body.hasClass("header-sticky")&&(h.$window.on("resize",function(){s=h.$header.find(".site-menu").outerHeight(!0),e=h.$header.outerHeight(!0),i=h.$header.find(".site-contact").outerHeight(!0),a=h.$body.hasClass("header-v1")||h.$body.hasClass("header-v5")?i:e,d("#mf-header-minimized").height(a)}).trigger("resize"),h.$window.on("scroll",function(){t=d("#topbar").outerHeight(!0),s=h.$header.find(".site-menu").outerHeight(!0),i=h.$header.find(".site-contact").outerHeight(!0),o=-1*i,h.$body.hasClass("admin-bar")&&(o+=32),n=(h.$body.hasClass("header-v1")||h.$body.hasClass("header-v2"))&&1199<h.$window.width()?t+i:h.$body.hasClass("header-v5")&&1199<h.$window.width()?t+i-.5*s:t,h.$window.scrollTop()>n?(h.$header.addClass("minimized"),d("#mf-header-minimized").addClass("minimized"),(h.$body.hasClass("header-v1")||h.$body.hasClass("header-v2")||h.$body.hasClass("header-v5"))&&1199<h.$window.width()&&h.$header.css("top",o)):(h.$header.removeClass("minimized"),d("#mf-header-minimized").removeClass("minimized"),(h.$body.hasClass("header-v1")||h.$body.hasClass("header-v2")||h.$body.hasClass("header-v5"))&&h.$header.removeAttr("style"))}))},h.pageHeader=function(){d(".page-header.parallax").find(".featured-image").parallax("50%",.6),d(".mf-service-banner").parallax("50%",.6)},h.widgetOffice=function(){var t=d(".office-location .office-switcher ul li"),e=t.filter(":first"),a=d(".office-location .office-switcher a"),n=d(".office-location .topbar-office");e.addClass("active"),n.filter(":first").addClass("active"),a.html(e.html()),a.on("click",function(e){var i=d(this);e.preventDefault(),i.parent().toggleClass("show-office")}),t.on("click",function(){var e=d(this),i=e.attr("data-tab");e.hasClass("active")||(a.html(e.html()),a.parent().toggleClass("show-office"),t.removeClass("active"),n.removeClass("active"),e.addClass("active"),d("#"+i).addClass("active"))})},h.activeHeaderMenu=function(){var e,i,t,a,n,o,s,l=h.$header.find("ul.menu");l.find("li:last-child").addClass("last-child"),l.append('<li id="mf-active-menu" class="mf-active-menu"></li>');var r,c=d("#mf-active-menu");(n=0)<l.children("li.current-menu-item, li.current-menu-ancestor, li.current-menu-parent").length&&(o=l.children("li.current-menu-item, li.current-menu-ancestor, li.current-menu-parent").outerWidth(),t=l.children("li.current-menu-item, li.current-menu-ancestor, li.current-menu-parent").children("a").outerWidth(),r=(o-t/2)/2,t/=2,c.width(t).css("left",l.children("li.current-menu-item, li.current-menu-ancestor, li.current-menu-parent").position().left+r).data("origLeft",c.position().left).data("origWidth",c.width()),n=c.data("origWidth")),l.children("li").hover(function(){e=d(this),s=e.outerWidth(),a=e.children("a").outerWidth(),r=(s-a/2)/2,a/=2,i=e.position().left+r,c.stop().animate({left:i,width:a})},function(){c.stop().animate({left:c.data("origLeft"),width:n})})},h.singlePortfolioGallery=function(){d(".single-portfolio .entry-thumbnail.portfolio-gallery").owlCarousel({rtl:!0,items:1,loop:!1,nav:!1,autoplay:!1,autoplayTimeout:0,autoplaySpeed:0,dots:!0,navSpeed:800,dotsSpeed:800})},h.singleGallery=function(){d(".format-gallery.owl-carousel").owlCarousel({rtl:!0,loop:!1,items:1,nav:!1,dots:!0})},h.portfolioFilter=function(){var e=d(".mf-list-portfolio");if(e.length){var i={itemSelector:".project-wrapper",transitionDuration:"0.7s"};e.imagesLoaded(function(){d(this.elements).isotope(i)});var a=d(".nav-filter");a.on("click","a",function(e){e.preventDefault();var i=d(this),t=i.attr("data-filter");a.find("a").removeClass("active"),d(this).addClass("active"),i.closest(".nav-section").next(".mf-list-portfolio").isotope({filter:t})})}},h.imagesPopUp=function(){var e=d(".mf-gallery-popup");if(e.length){var t=e.find("a.photoswipe"),a=[];t.each(function(){var e=d(this),i=e.find("img").outerWidth(),t=e.find("img").outerHeight();a.push({src:e.attr("href"),w:i,h:t})}),e.on("click","a.photoswipe",function(e){e.preventDefault();var i={index:t.index(d(this)),bgOpacity:.85,showHideOpacity:!0,mainClass:"pswp--minimal-dark",barsSize:{top:0,bottom:0},captionEl:!1,fullscreenEl:!1,shareEl:!1,tapToClose:!0,tapToToggleControls:!1};new PhotoSwipe(document.getElementById("pswp"),window.PhotoSwipeUI_Default,a,i).init()})}},h.productQuantity=function(){h.$body.on("click",".quantity .increase, .quantity .decrease",function(e){e.preventDefault();var i=d(this),t=i.siblings(".qty"),a=parseInt(t.val(),10),n=parseInt(t.attr("min"),10),o=parseInt(t.attr("max"),10);n=n||1,o=o||a+1,i.hasClass("decrease")&&n<a&&(t.val(a-1),t.trigger("change")),i.hasClass("increase")&&a<o&&(t.val(a+1),t.trigger("change"))})},d(function(){h.init()})}(jQuery);